where to run or write the mongo db commands? 
open the command prompt and type mongosh to start the MongoDB shell,  and then enter the db commands. 
How to create a database in mongoDB? use database-Name
How to create a collection(table) in database? db.createCollection("collection_name")
collection = table && document = record
ctrl + L = //to clear the mongosh
show dbs = //to view all databases
db : //show us the current database we are in.
db.help() = //show us all commands 
db.collection-name.help() : //show all commands related to the given collection.
How to edit the collection name?
db.old-collection-name.renameCollection("new-collections-name") 
How to delete the collection?
db.library.drop(): //this will delete the library collection.
db.dropDatabase(): //this will delete the database you are in.
db.students.insertOne({}) : //add one record
db.students.insertMany([{}, {}]) : //add many records.
db.students.find(): //gets all record from the database.

db.personal.insertOne({ name:"yahoo baba", age: 25, married: false, dob: ISODate("2000-10-15T08:00:00Z"), weight: 72.50, kids: null , hobbies: ["sports", "music"], address: {street: "123 main st", zip: 10001, city: "kabul"}})


db.personal.insertOne({ name:"asadullah ", age: 25, married: false, dob: new Date(), weight: 67.50, kids: null , hobbies: ["sports", "study"], address: {street: "123 main st", zip: 10002, city: "kunar"}})

...................................... MongoDB Json Schema Validation ..................................................

db.createCollection("students", {
	validator: {
		$jsonSchema: {
			required: ["name", "age", hobbies],
			title: "students object validation ",
			properties: {
				name: {bsonType:"string", description: "Name is required and must be a string "},
				age: { bsonType: "int", manimum: 5 , maximum: 20, description: "Age must be in 5 and 20"}
				hobbies: { bsonType: "array", items: {bsonType: "string"}, description: "hobbies must be 					array of strings"}
			}
		}	
  	}
})


......................................... Modify an Existing Collection's Schema ......................................... 


db.runCommand({
	collMod: "students",  //students is collection name
	validator: {
		$jsonSchema: {
			required:["name","age"],
			properties: {....same as above......}
		}
	}
})



.......................updateOne, updateMany, replaceOne of Documents .................................................

find the first match record and change it.
db.collection_name.updateOne( 
	{field:"value"},  //this is filter, search and find by this field in db, we can search by any field and value
	{ $set: {updated_field1: "new_value", updated_field2: "new_value"}}  // write the new updated field_values. 
 )

find all match records and change all records at once. 
db.collection_name.updateMany( 
	{field:"value"},  //this is filter, search and find by this field in db, we can search by any field and value
	{  $set: {updated_field1: "new_value", updated_field2: "new_value"} }  // write the new updated field_values. 
 )


db.collection_name.replaceOne( 
	{field:"value"},  //this is filter, search and find by this field in db, we can search by any field and value
	{field1: "value1", field2: "value2", ...}  // replace the old object to the new one. 
 )

--------- EXAMPLES : --------------

db.personal.updateOne(
{name:"Yahoo Baba"}, //find it by name
{$unset: {age:""}} // remove the age field from this object
) 

db.personal.updateOne(
{name:"Yahoo Baba"}, //find it by name
{$rename: {age:"Age"}} // rename age by Age
)

db.personal.updateMany(
{}, //gets all objects
{$rename: {age:"Age"}} // rename age by Age in all objects.
)


db.personal.updateMany(
{}, // Selects all documents in the 'personal' collection
{ $currentDate: {lastModified:true} } // Add a new field named lastModified with the current datetime if it doesn't exist, 						or update it to the current datetime if it already exist.
)

db.personal.updateOne(
{name:"Yahoo Baba"}, //find it by name
{$unset: {age:""}} // remove the age field from this object
) 

db.personal.updateOne(
{name:"Yahoo Baba"}, //find it by name
{$inc: {age:2}} // increment the age field by 2 
)

db.personal.updateOne(
{name:"Yahoo Baba"}, //find it by name
{$mul: {age:2}} // multiply the age field by 2 
)


db.personal.updateOne(
{name:"Yahoo Baba"}, //find it by name
{$min: {age:2}} // if the document age is greater than 2, it will update to 2, if age is 2 or less, it remains unchanged. 
)

db.personal.updateOne(
{name:"Yahoo Baba"}, //find it by name
{$max: {age:5}} // if the document age is less than 5, it will update to 5, if age is 5 or greater, it remains unchanged. 
)


----------Array Related ---------------

db.personal.updateOne(
{name:"Yahoo Baba"}, //find it by name
{$push: {hobbies:"running"}} // push or add "running" to the array named hobbies. 
)

db.personal.updateOne(
{name:"Yahoo Baba"}, //find it by name
{$addToSet: {hobbies:"running"}} // it does not add "running" to the array named hobbies if present, if not add it. 
)


db.personal.updateOne(
{name:"Yahoo Baba"}, //find it by name
{$pop: {hobbies:-1}} //removes only first or last one, if -1 delete the first one, if 1 delete the last one.  
)

db.personal.updateOne(
{name:"Yahoo Baba"}, //find it by name
{$pull: {hobbies:"running"}} //used for removing the specific value, removes "running" element from the hobbies array.  
)


db.personal.updateOne(
{name:"Yahoo Baba"}, //find it by name
{$pullAll: {hobbies:["running", "study"]}} //removes "running" and "study" from the hobbies array.  
)

....set or add the skills:["java","React"] array in all objects.....
 db.personal.updateMany(
 {},  //targets all documents
 { $set:{ "skills": ["java","React"] } }
)


instead of $set:{} we can use the followings. 
$unset:Removes the field from the document.
$rename: Rename the field.
$inc: Increments the integer field value.
$mul: Multiplies the integer field value.
$currentData: set the field value to the current data.
$push : adds an element to an arry.

...................... Delete the document ..............................

db.collectionName.deleteOne({field:"value"})  // find by field and delete the first matched one.
db.collectionName.deleteMany({field: "value"}) // delete all matched records.
db.collectionName.deleteMany({}) // delete all records in collection.

db.personal.deleteOne({_id:ObjectId('3434329ed240ds3499sdf5')}). //find it by id and delete it. 
db.personal.deleteMany({class:"BCA"}). //find it by class and delete all related records. 


........................ find() and findOne()...................................................................
db.collectionName.find() // finds all records
db.collectionName.find({field:"value"}) // find it by fieldName and give us all matched records.

db.collectionName.findOne({field:"value"}) // find it by field and give us the first matched record. 


db.personal.find({city:"kabul"})  // give us all records in which city is kabul.
db.personal.findOne({city:"kabul"})  // give us the first matched record in which city is kabul. 



--------------------find() with projection, count(), sort(), limit(), skip() ------------------------------------

projection is used when we want to show a specific fields in matched records not the whole object.
db.collectionName.find(
	{field:"value"}  // Query: for the search 
	{field:1, field:0} //projection: fields with 1 shows and field with 0 does not shows
)

db.collectionName.find({field:"value"}).projection({field:1, field:0}) // second method for the projection

Examples: 
db.personal.find({city:"kabul"}, {name:1, age:1, _id:0}) // it shows only name and age in matched record.
db.personal.find({city:"kabul"}).projection({{name:1, age:1, _id:0}}) // show the same result.

db.personal.find().projection({{name:1, age:1, _id:0}}) // show all records with name and age fields only.
  

db.personal.find().count() // count all records and give us the numeric output like 7 or 10 ...
db.personal.find({class:"Java"}).count() // counts all records in which class is "java".
db.personal.find().sort({name:1}) // sort it by name in ascending order, 1 is for ascending order.
db.personal.find().sort({age:-1}) // sort it by age in descending order, -1 is for descending order.
db.personal.find().sort(city:-1)  // sort it by city in descending order, -1 is for descending order.
db.personal.find({}, {name:1, age:1, _id:0}).sort({name:-1}) // show all records with projection, in descending order.
db.personal.find().limit(3)  // shows only first 3 records 
db.personal.find()limit(5)
db.personal.find().limit(3).skip(3) // shows 3 records but skips first 3 records, shows 4,5,6. 
db.personal.find().limit(2).skip(4) // shows 2 records but skips first 4 records, shows 5,6.
db.personal.find().limit(2).skip(0) // shows 2 records but skips first 0 records, shows 1,2.


____________________________Comparison Operatores with find(), update(), delete() ___________________________

$eq = equal to
$ne = not equal to 
$gt = greater than
$gte = greater than or equal to 
$lt = less than
$lte = less than or equal to
$in = include 
$nin = not include 
 

 db.personal.find({name:"Abid"})   ===  db.personal.find({name:{$eq:"Abid"}})
db.personal.find({age:{$ne:20}})  // age is not equal to 20
db.personal.find({age:{$gt:20}})  // show us all objects where age is greater than 20, it works only for numeric field
db.personal.find({age:{$lte:20}})  // show us all objects in which age is less than or equall to 20.
db.personal.find({age:{$lte:20}})
db.personal.find({age:{$in:[20, 24, 45]}}). // show us all objects in which age is 20,24 or 45,or it include in [20,24,45]

db.personal.updateMany(
	{age:{$lt:20}},  // find all objects in which age is less than 20
	{ $set: {class:"12th"} }  // updates the class field in all objects "12th".
)

db.personal.deleteMany(
	{age:{$lt:20}},  // delete all objects in which age is less than 20.

)


____________________________Logical Operatores with find(), update(), delete() ___________________________

$and: Returns documents where both queries match
$or: Returns documents where either query match.
$nor: Returns documents where both queries fail to match.
$not: Returns documents where the query does not match, it is equal to nor but it is for the single condition.


//Returns documents where age is between 20 and 10.
db.personal.find({ 
	$and:[
		{age: {$lt:20} },
		{ age: {$gt:10} }
		]
})

db.personal.find({ 
	$or:[
		{age: {$lt:20} },
		{ class: {$eq:"12th"} }
		]
})


Returns all documents where age is not greter than 20.
db.personal.find({ 
	age:{$not:{$gt:20}}
})

___________________________ Element Query Operators __________________________________________________
$exists:Matches documents that have the specific field.
	{field:{$exist:true} }
$$type: Select docuements if a field is of the specific type 

	{field: { $type: <type>} }

Examples : 
db.personal.find({name:{$exists:true}})  // Returns all documents where name field exists.
db.personal.find({weight:{$type:"double"}})  // Returns all documents where weight type is double.

db.personal.find({weight:{$type:["double", "int"]}})  // Returns all documents where weight type is double or int.


___________________________ Evaluation Query Operators __________________________________________________

$regex: Matches only string fields to the given pattern
	"^S": starts with "S", "an$": ends with "an"
	{field:{$regex: /patern/options} }

$expr: allows two fields comparision within documents.
	db.monthlyBudget.find({
		$expr: { $gt:["$spent","$budget"]}  // show us all documents where spent field value is greater than 								budget field value 
	})


	db.sales.find({
		$expr: { $gt:["$spent", {$mul:["$spent",1.2] } ]}   			
	})

$mod: Matches numbers based on the remainder.
	{field: {$mod: [divisor,remainder]}} // show us all documents where field value divided by the divisor, if the 	remainder is equal to given remainder in $mod: [divisor,remainder] 
$jsonSchema: Validate documents against the given JSON Schema.


Examples : 
 db.personal.find({age: {$mod: [5,0]} }) // show us all documents where age field value is divided by 5 and give us 0 as remainder.

db.personal.find({name: {$regex:"khan"}}) //find all documents where name has "khan" in its first, middle or end part.
db.personal.find({name: {$regex:"sa"}}) //find all documents where name has "sa" in its any part.
db.personal.find({name: {$regex:"^A"}}) //find all documents where name starts with capital "A".
db.personal.find({name: {$regex:"an$"}}) //find all documents where name ends with small "an".

db.personal.find({name: {$regex:/khan/i}}) //find all documenent where "khan" is in the capital or small letters.
db.personal.find({name: {$regex:/khan/i}}) //find all documenent where "khan" is in the capital or small letters.



___________________________ findOneAndUpdate()  _________________________________________________________________
it works like update with a few differences, it return the updated,deleted or the object we replace, it returns the object we take action on. 

db.personal.findOneAndUpdate(
	{name:"Abid"},   // find it by name
	{$set: {age:60}},  //replace age to 60
	{ 
		returnDocument: "after",      // "after" is for the updated document, "before" is for unUpdated document.
		projection: {name:1, age:1}, //the return docuemnt only shows name and age.
		upsert:true,                 // if the record doesn't exist it add the record.
		sort: 1                  // we can sort the return documents if it is more than one.
	}  
		
)


___________________________ findOneAndReplace()  _________________________________________________________________
it completly replace the old document by new one. 

db.personal.findOneAndReplace(
	{name:"Abid"},   // find it by name
	{name:"Ali", age:30, class:"CSS"},  //replace the old for this new
	{ 
		returnDocument: "after",      // "after" is for the updated document, "before" is for unUpdated document.
	
	}  
		
)


___________________________ findOneAnddelete()  _________________________________________________________________
it delete the document. 

db.personal.findOneAndDelete(
	{name:"Abid"},   // find it by name
	{ 
		projection:{name:1, _id:0},
		sort: {age:-1} // sort it descending if multiples.
	}  
		
)




___________________________ aggregate()   _________________________________________________________________

 db.personal.aggregate([
	{$match:{ age:{$gt:20} }},   //stage 1 : 
	{$sort:{weight:-1}},       // stage 2 : sort the result which receive from this stage 1 
	{$project:{name:1,age:1,weight:1}}  //stage 3 : 
])


 db.personal.aggregate([
	{$match:{class:"BCA"}},   //stage 1 : gives the documents where class is "BCA"
	
])


gives us the documents where age is greater than 20 and class is "BCA"
 db.personal.aggregate([
	{$match:{
			$and:[{age: {$gt:20}},{class: "BCA"}]
		}
	},   
	
])






